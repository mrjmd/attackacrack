{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
    <h2 class="text-3xl font-bold mb-6">Dashboard</h2>

    <!-- Stats Widgets -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
        <div class="bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-sm font-medium text-gray-400">Total Contacts</h3>
            <p class="text-3xl font-bold mt-2">{{ stats.contact_count }}</p>
        </div>
        <div class="bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-sm font-medium text-gray-400">Total Properties</h3>
            <p class="text-3xl font-bold mt-2">{{ stats.property_count }}</p>
        </div>
        <div class="bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-sm font-medium text-gray-400">Active Jobs</h3>
            <p class="text-3xl font-bold mt-2">{{ stats.active_jobs }}</p>
        </div>
        <div class="bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-sm font-medium text-gray-400">Pending Quotes</h3>
            <p class="text-3xl font-bold mt-2">{{ stats.pending_quotes }}</p>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Upcoming Appointments -->
        <div class="lg:col-span-2 bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-xl font-bold mb-4">Upcoming Appointments</h3>
            <div>
                {% for appt in appointments %}
                <div class="border-b border-gray-700 py-3">
                    <p class="font-semibold"><a href="{{ url_for('appointment.appointment_detail', appointment_id=appt.id) }}" class="hover:text-blue-400">{{ appt.title }}</a></p>
                    <p class="text-sm text-gray-400">{{ appt.date.strftime('%A, %B %d, %Y') }} at {{ appt.time.strftime('%I:%M %p') }}</p>
                    <p class="text-sm text-gray-300">With: <a href="{{ url_for('contact.contact_detail', contact_id=appt.contact_id) }}" class="hover:text-blue-400">{{ appt.contact.first_name }} {{ appt.contact.last_name }}</a></p>
                </div>
                {% else %}
                <p class="text-gray-400">No upcoming appointments.</p>
                {% endfor %}
            </div>
        </div>

        <!-- API Integrations Placeholder -->
        <div class="bg-gray-900 p-6 rounded-lg shadow">
            <h3 class="text-xl font-bold mb-4">Integrations</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold">Google Calendar</h4>
                    <p class="text-gray-400 text-sm">Upcoming events will be shown here.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Gmail</h4>
                    <p class="text-gray-400 text-sm">Recent unread emails will be shown here.</p>
                </div>
                <div>
                    <h4 class="font-semibold">OpenPhone</h4>
                    <p class="text-gray-400 text-sm">Recent text messages will be shown here.</p>
                </div>
            </div>
        </div>

    </div>
{% endblock %}
